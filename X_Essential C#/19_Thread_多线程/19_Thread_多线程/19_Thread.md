# 19 多线程
## 进程与线程
-  计算机可在同时进行多项操作即并发操作
-  操作系统以进程（process）方式运行应用程序
-  进程包括指令流，也包括运行程序所需内存、寄存器等资源
- 进程即正在运行的程序所占用的计算机资源的合集
- 开启几个应用程序，系统里就创建了几个进程，就增加了几条执行路线。
- 操作系统轮流执行每个进程，每个进程执行一小段时间。
- 进程交替时间很短（一般只有即使毫秒），人们根本感觉不到如此短暂的停顿，所以在表面上看来就像三个工作同时进行似的。
### 进程在宏观上是并发的，在微观上是交替进行的
- 分时映射，以时间换空间
- 多核CPU在微观上可以并发
- 线程非常类似于进程，在一个进程中创建了一个或若干个独立的执行流，每个独立的执行流都称为一个线程，比如一个线程播放动画，一个线程检测用户输入，操作系统将自动以“时间片轮转”的方式交替执行这两个线程中的指令。

### 进程是资源分配的最小单元，线程是最小的执行单元。一个进程可以有多个线程，多个线程可以共享进程资源。
### 操作系统才是进程与线程的操作与管理者，C#只是封装调用相应功能
- 芯片厂商纷纷发布了多鹤形CPU，使得线程能够真正的实现同步执行，因此多线程技术可在性能上有大的提升。（并发成为并行）

## 进程管理
###  一个进程无法直接访问另一个进程的内存空间，进程之间是相互独立的（操作系统级程序除外）
### Process类管理进程
- using System.Diagnostics;
- Id  进程Id
- Handle 进程句柄
- ProcessName   进程名
- Windows API通常可以使用Handle及SendMessage发送消息，实现进程间的通信

### 启动进程
- 搜索路径
	- 程序当前路径
	- 系统环境变量Path
	- 指定程序的完整路径
- StartInfo.FileName  要执行的程序名
- StartInfo.Arguments  执行程序时带的参数
- StartInfo.WindowStyle  执行窗体启动方式
- Start()   启动程序

### 获取进程
- Process.GetProcesses();
- Process.GetProcessById();
- Process.GetProcessesByName();

### 关闭进程
- 关闭是有条件的，不保证100%能关闭
-  两种关闭
	- Kill  非正常中止进程
	- CloseMainWindow  相当于界面中单机关闭按钮
-  相关属性
	- HasExited 进程是否已中止的值， true表示已关闭
	- EnableRaisingEvents  进程终止时是否应引发Exited事件


